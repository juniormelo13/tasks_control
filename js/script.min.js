(()=>{"use strict";function e(e){e.classList.remove("lowOpacity"),e.classList.add("normalOpacity"),e.classList.add("hover"),e.disabled=!1}function t(e){e.classList.remove("normalOpacity"),e.classList.add("lowOpacity"),e.classList.remove("hover"),e.disabled=!0}let s=new Array;function a(e){e.scheduledTask&&delete e.scheduledTask,e.expireAlert&&delete e.expireAlert,e.expiredTask&&delete e.expiredTask}function i(e,t,a,i,n,c,l,o){e.deletedInfoTask&&!e.scheduledTask&&delete e.deletedInfoTask,e.deletedInfoTask||(e.scheduledTask=[!0,t,a,i.innerText],(n>0&&n<=30&&c===t||l<2&&1==o&&n>0&&n<=30||l<2&&-6==o&&n>0&&n<=30)&&(e.expireAlert=!0)),localStorage.setItem("tasks",JSON.stringify(s))}function n(e,t,a,i){e.deletedInfoTask||(delete e.scheduledTask,delete e.expireAlert,e.expiredTask=[!0,t,a,i.innerText],localStorage.setItem("tasks",JSON.stringify(s)))}const c=document.querySelectorAll("[data-btnFilter]"),l=document.querySelector('[data-btnFilter="allTasksFilterBtn"]'),o=document.querySelector('[data-btnFilter="pendingTasksFilterBtn"]'),d=document.querySelector('[data-btnFilter="scheduledTasksFilterBtn"]'),r=document.querySelector('[data-btnFilter="expiredTasksFilterBtn"]'),u=document.querySelector('[data-btnFilter="completedTasksFilterBtn"]'),m=document.querySelector("#amountAllTasks"),L=document.querySelector("#amountPendingTasks"),p=document.querySelector("#amountScheduledTasks"),f=document.querySelector("#amountExpiredTasks"),v=document.querySelector("#amountCompletedTasks");function h(){const e=s.filter(e=>!e.completedTask),t=s.filter(e=>e.scheduledTask),a=s.filter(e=>e.expiredTask),i=s.filter(e=>e.completedTask);m.innerText=s.length,L.innerText=e.length,p.innerText=t.length,f.innerText=a.length,v.innerText=i.length}function g(e){for(let t=0;t<s.length;t++){const a=s[t],i=at.childNodes[t];"pendingTask"==e?a.completedTask?i.classList.contains("hide")||i.classList.add("hide"):i.classList.contains("hide")&&i.classList.remove("hide"):"allTask"==e||a.hasOwnProperty(e)?i.classList.contains("hide")&&i.classList.remove("hide"):i.classList.contains("hide")||i.classList.add("hide")}"pendingTask"==e?(A.innerText="Pendentes",F("pendingTasks")):"scheduledTask"==e?(A.innerText="Agendadas",F("scheduledTasks")):"expiredTask"==e?(A.innerText="Expiradas",F("expiredTasks")):"completedTask"==e?(A.innerText="Concluídas",F("completedTasks")):F("allTasks")}function k(e){c.forEach(e=>{e.classList.contains("active")&&e.classList.remove("active")}),e.classList.add("active")}function T(){d.classList.contains("active")?g("scheduledTask"):o.classList.contains("active")?g("pendingTask"):r.classList.contains("active")?g("expiredTask"):u.classList.contains("active")&&g("completedTask")}const S=document.querySelector("#searchTaskInput"),E=document.querySelector("#cleanInputSearchBtn");function y(){S.value="",E.classList.add("hide")}function x(){let e=[];for(let t=0;t<s.length;t++){const a=s[t],i=at.childNodes[t];a.taskContent.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(S.value.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""))?(e.push("false"),i.classList.contains("hide")&&i.classList.remove("hide")):(e.push("true"),i.classList.contains("hide")||i.classList.add("hide"))}e.includes("false")?q():C()}const I=document.querySelector("#filterInformationBox"),A=document.querySelector("#filterInformation"),N=document.querySelector("#cleanFilterBtn"),b=document.querySelector("#noTaskTextContainer");let B=!1;function q(){b.classList.contains("hide")||b.classList.add("hide")}function C(){b.classList.contains("hide")&&b.classList.remove("hide")}function F(e){"pendingtasks"==e?s.filter(e=>!e.completedTask).length?q():C():"scheduledTasks"==e?s.filter(e=>e.scheduledTask).length>0?q():C():"expiredTasks"==e?s.filter(e=>e.expiredTask).length>0?q():C():"completedTasks"==e?s.filter(e=>e.completedTask).length>0?q():C():s.length>0?q():C()}function O(){I.classList.remove("filterInfoVanish"),I.classList.add("filterInfoAppear"),B=!0}function w(){I.classList.remove("filterInfoAppear"),I.classList.add("filterInfoVanish"),B=!1}const D=document.querySelector("#removeAllTaskBtn");function R(){s.length>0?D.disabled&&e(D):D.disabled||t(D)}function j(){const e=at.childNodes;for(const t of e)t.classList.add("vanishTask");s.splice(0,s.length),localStorage.setItem("tasks",JSON.stringify(s)),localStorage.removeItem("tasks"),t(D),setTimeout(()=>{at.innerHTML="",B&&(I.classList.remove("filterInformationOffBlur"),w(),y(),k(allTasksFilterBtn)),h(),F("allTasks")},200)}function J(){we(Be),setTimeout(()=>{j(),oe()},200)}t(D);const P=document.querySelector("#inputFileImg"),z=document.querySelector("#uploadedImg"),H=document.querySelector("#inputFileImgLabel"),M=document.querySelector("#inputFileBtnPlus"),W=document.querySelector("#inputFileBtnDel");let V=[];function U(){M.classList.toggle("hide"),W.classList.toggle("hide")}function Y(){we(Be),setTimeout(()=>{G(),oe()},200)}function G(){localStorage.removeItem("infoAccountImg"),z.src="./img/profile-avatar.png",U(),P.setAttribute("title","Adicionar foto")}const K=document.querySelector("#scheduleField"),Q=document.querySelector("#scheduleFieldCloseBtn"),X=document.querySelector("#cancelScheduletBtn"),Z=document.querySelector("#scheduleInputDate"),$=document.querySelector("#scheduleInputTime"),_=document.querySelector("#confirmScheduleBtn");Q.onclick=()=>we(K),X.onclick=()=>we(K);const ee=(e,t,s,a,n,c,l)=>{const o=new Date,d=o.toLocaleDateString("fr-CA"),r=o.toLocaleString("pt-BR",{timeStyle:"short"}),u=Z.value,m=$.value;if((""!=u.trim()&&u>=d||(Z.classList.add("inputError"),Z.blur(),0))&&(""!=m.trim()&&u>d||u===d&&m>r||($.classList.add("inputError"),$.blur(),0))){const r=new Date(u+" "+m),L=r.toLocaleString("pt-BR",{dateStyle:"short"}),p=r.toLocaleString("pt-BR",{timeStyle:"short"}),f=r.toLocaleString("pt-BR",{weekday:"short"}).charAt(0).toUpperCase()+r.toLocaleString("pt-BR",{weekday:"short"}).substring(1).replace(/[.]/g,","),v=(r.getTime()-o.getTime())/1e3/60,g=v/1440,k=r.getDay()-o.getDay();g>=2||g>1&&g<2&&k>=2||g>1&&g<2&&-5==k?a.innerText=f+" "+L+", "+p:te(a,g,v,k,m,u,d),we(K),setTimeout(()=>{t.classList.add("disabledBtn"),e.classList.add("scheduled"),s.classList.add("scheduled"),n.setAttribute("title","Remover prazo"),s.classList.remove("hide"),s.classList.add("appearTaskInfo"),l.classList.add("pointerEventsNone"),se(e,s,v,d,g,k,u)},200),setTimeout(()=>{s.classList.remove("appearTaskInfo"),l.classList.remove("pointerEventsNone")},400),i(c,u,m,a,v,d,g,k),h()}};function te(e,t,s,a,i,n,c){t<2&&1==a&&s>60||t<2&&-6==a&&s>60?e.innerText="Amanhã, "+i:t<2&&1==a&&s>30&&s<=60||t<2&&-6==a&&s>30&&s<=60?e.innerText="Amanhã, "+i+" - Faltam "+Math.ceil(s)+" min":t<2&&1==a&&s>0&&s<=30||t<2&&-6==a&&s>0&&s<=30?e.innerText=s<=1?"Amanhã, "+i+" - Falta "+Math.ceil(s)+" min":"Amanhã, "+i+" - Faltam "+Math.ceil(s)+" min":c===n&&s>60?e.innerText="Hoje, "+i:s>30&&s<=60&&c===n?e.innerText="Hoje, "+i+" - Faltam "+Math.ceil(s)+" min":s>0&&s<=30&&c===n&&(e.innerText=s<=1?"Hoje, "+i+" - Falta "+Math.ceil(s)+" min":"Hoje, "+i+" - Faltam "+Math.ceil(s)+" min")}function se(e,t,s,a,i,n,c){(s>0&&s<=30&&a===c||i<2&&1==n&&s>0&&s<=30||i<2&&-6==n&&s>0&&s<=30)&&(e.classList.add("expireAlert"),t.classList.add("expireAlert"))}const ae=document.querySelector("html"),ie=document.querySelector("#themeCheckBox");function ne(){ae.classList.add("darkTheme"),Z.classList.add("darkTheme"),$.classList.add("darkTheme"),localStorage.setItem("theme","darkTheme"),ie.checked=!0,le.disabled&&e(le)}function ce(){ae.classList.remove("darkTheme"),Z.classList.remove("darkTheme"),$.classList.remove("darkTheme"),localStorage.removeItem("theme"),ie.checked=!1}const le=document.querySelector("#removeAllConfigBtn");function oe(){localStorage.getItem("tasks")||localStorage.getItem("infoAccountImg")||localStorage.getItem("infoAccountName")||localStorage.getItem("theme")?le.disabled&&e(le):le.disabled||t(le)}function de(){we(Be),setTimeout(()=>{localStorage.getItem("tasks")&&j(),localStorage.getItem("infoAccountImg")&&G(),localStorage.getItem("infoAccountName")&&he(),localStorage.getItem("theme")&&ce(),nameIdentBox.classList.contains("editing")&&(ue.value="",ve()),B&&(w(),y(),k(allTasksFilterBtn)),t(le)},200)}t(le);const re=document.querySelector("#nameIdentBox"),ue=document.querySelector("#nameInput"),me=document.querySelector("#nameIdentIcon"),Le=document.querySelector("#saveNameButton"),pe=document.querySelector("#deleteNameButton"),fe=document.querySelector("#recoverNameButton");function ve(){Le.classList.add("hide"),pe.classList.add("hide"),fe.classList.add("hide"),re.classList.remove("editing"),me.classList.remove("hide")}function he(){localStorage.removeItem("infoAccountName"),ue.value="",oe()}function ge(){Le.classList.add("hide"),re.classList.remove("editing"),me.classList.remove("hide"),""==ue.value.trim()?(he(),fe.classList.add("hide")):(localStorage.setItem("infoAccountName",ue.value.trim()),le.disabled&&e(le),ue.value=localStorage.getItem("infoAccountName"),pe.classList.add("hide"))}function ke(){""!=ue.value.trim()?(pe.classList.remove("hide"),fe.classList.add("hide")):(pe.classList.add("hide"),localStorage.getItem("infoAccountName")&&fe.classList.remove("hide"))}const Te=document.querySelector("#menuButton"),Se=document.querySelector("#menu"),Ee=document.querySelector("#menuButtonIcon"),ye=document.querySelector("#menuButtonIconMobile");let xe=!1;function Ie(){Ee.classList.toggle("fa-angles-down"),Ee.classList.toggle("fa-xmark"),ye.classList.toggle("fa-angles-left"),ye.classList.toggle("fa-xmark"),Te.classList.toggle("active")}function Ae(){xe=!xe,Se.classList.add("pointerEventsNone"),Se.classList.remove("menuAppear"),Se.classList.add("menuVanish"),Te.disabled=!0,Ie(),setTimeout(()=>{Se.classList.add("hide"),Te.disabled=!1},200)}const Ne=document.querySelector("#header"),be=document.querySelector("#mainContainer"),Be=document.querySelector("#confirmationWindow"),qe=document.querySelector("#confirmationWindowText"),Ce=document.querySelector("#btnYes"),Fe=document.querySelector("#btnNo");function Oe(e){Ne.classList.add("pointerEventsNone"),be.classList.add("pointerEventsNone"),at.classList.add("tasksContainerHide"),b.classList.contains("hide")||b.classList.add("noTaskTextHide"),B&&(I.classList.remove("filterInformationOffBlur"),I.classList.add("filterInformationBlur")),xe&&(Se.classList.remove("menuOffBlur"),Se.classList.add("menuBlur")),e.classList.remove("hide"),e.classList.add("appearWindow")}function we(e){at.classList.remove("tasksContainerHide"),at.classList.add("tasksContainerAppear"),b.classList.contains("hide")||(b.classList.remove("noTaskTextHide"),b.classList.add("noTaskTextAppear")),e.classList.remove("appearWindow"),e.classList.add("vanishWindow"),B&&(I.classList.remove("filterInformationBlur"),I.classList.add("filterInformationOffBlur")),xe&&(Se.classList.remove("menuBlur"),Se.classList.add("menuOffBlur")),setTimeout(()=>{Ne.classList.remove("pointerEventsNone"),be.classList.remove("pointerEventsNone"),at.classList.remove("tasksContainerAppear"),b.classList.contains("hide")||b.classList.remove("noTaskTextAppear"),e.classList.remove("vanishWindow"),e.classList.add("hide")},200)}function De(e,t){Oe(Be),qe.innerText=e,Ce.focus(),Ce.onclick=()=>t(),Fe.onclick=()=>we(Be)}function Re(e){const t=at.childNodes;if("add"==e)for(const e of t){const t=e.firstChild.firstChild,s=t.childNodes[1];t.classList.remove("hover"),s.classList.add("pointerEventsNone")}else for(const e of t){const t=e.firstChild.firstChild,s=t.childNodes[1];t.classList.add("hover"),s.classList.remove("pointerEventsNone")}}function je(e){const t=at.childNodes;if("add"==e)for(const e of t)e.classList.add("pointerEventsNone");else for(const e of t)e.classList.remove("pointerEventsNone")}const Je=document.querySelector("#editField"),Pe=document.querySelector("#editInput"),ze=document.querySelector("#cleanEditInputBtn"),He=document.querySelector("#closeEditFieldBtn"),Me=document.querySelector("#confirmEditBtn"),We=document.querySelector("#cancelEditBtn");function Ve(e,t){Ge(Pe)&&(we(Je),t.taskContent=Pe.value,localStorage.setItem("tasks",JSON.stringify(s)),setTimeout(()=>{e.innerText=Pe.value,e.classList.add("editAnimation"),je("add")},200),setTimeout(()=>{e.classList.remove("editAnimation"),je("remove")},500))}function Ue(e,t){return""!=e.value.trim()?(t.classList.remove("hide"),!0):(t.classList.add("hide"),!1)}function Ye(e,t){t.classList.add("hide"),e.value="",e.focus()}function Ge(e){return""!=e.value.trim()||(e.classList.add("inputError"),e.value="",e.blur(),!1)}function Ke(e){""==e.value.trim()&&(e.value="")}function Qe(e,t,s){(s.classList.contains("scheduled")||s.classList.contains("expiredTask"))&&(e.innerText=""),t.classList.contains("hide")||t.classList.add("hide"),t.classList.contains("scheduled")&&(s.classList.remove("scheduled"),t.classList.remove("scheduled")),s.classList.contains("expireAlert")&&(s.classList.remove("expireAlert"),t.classList.remove("expireAlert")),s.classList.contains("expiredTask")&&(s.classList.remove("expiredTask"),t.classList.remove("expiredTask")),s.classList.contains("completed")&&(s.classList.remove("completed"),t.classList.remove("completed"))}Pe.onkeyup=()=>Ue(Pe,ze),Pe.onblur=()=>Ke(Pe),ze.onclick=()=>Ye(Pe,ze),He.onclick=()=>we(Je),We.onclick=()=>we(Je),document.addEventListener("click",e=>{it.classList.contains("inputError")&&!nt.contains(e.target)?it.classList.remove("inputError"):Pe.classList.contains("inputError")&&!Me.contains(e.target)?Pe.classList.remove("inputError"):Z.classList.contains("inputError")&&!_.contains(e.target)?Z.classList.remove("inputError"):$.classList.contains("inputError")&&!_.contains(e.target)&&$.classList.remove("inputError")});function Xe(e,t,s){e.classList.add("completed"),t.classList.add("completed"),t.classList.remove("hide"),s.innerText="Tarefa concluída"}function Ze(e,t,i,n,c,o,d,r,u,m,L,p){!function(e){e.deletedInfoTask&&delete e.deletedInfoTask,a(e),e.completedTask?delete e.completedTask:e.completedTask=!0,localStorage.setItem("tasks",JSON.stringify(s))}(p),Re("add"),e.classList.add("vanishTask"),setTimeout(()=>{!function(e,t,s,a,i,n,c,l){s.classList.toggle("fa-thumbs-up"),s.classList.toggle("fa-rotate"),s.classList.toggle("fa-spin"),e.classList.contains("expiredTask")||n.classList.toggle("disabledBtn"),e.classList.contains("scheduled")||e.classList.contains("expiredTask")||i.classList.toggle("disabledBtn"),c.classList.toggle("hide"),l.classList.toggle("hide"),t.classList.toggle("completed"),e.classList.contains("completed")?a.setAttribute("title","Concluir"):a.setAttribute("title","Restaurar")}(t,i,c,n,d,o,L,m),t.classList.contains("completed")?Qe(u,r,t):t.classList.contains("scheduled")||t.classList.contains("expiredTask")?(Qe(u,r,t),Xe(t,r,u)):Xe(t,r,u),e.classList.remove("vanishTask"),e.classList.add("appearTask"),h(),l.classList.contains("active")||T()},200),setTimeout(()=>{e.classList.remove("appearTask"),Re("remove")},400)}let $e=!1;function _e(e,t,a,i,n,c,l){""!=n.value.trim()?(l.savedNote=[!0,n.value.trim()],localStorage.setItem("tasks",JSON.stringify(s)),c.classList.add("active")):(l.savedNote&&delete l.savedNote,localStorage.setItem("tasks",JSON.stringify(s)),c.classList.remove("active")),t.classList.remove("flipAnimate"),et(e,i,"false"),a.classList.remove("pointerEventsNone"),$e=!1,setTimeout(()=>{Ne.classList.remove("pointerEventsNone"),Se.classList.remove("pointerEventsNone"),I.classList.remove("pointerEventsNone")},200)}function et(e,t,s){const a=at.childNodes;if("true"==s){for(const e of a)e.classList.add("pointerEventsNone"),e.classList.add("lowOpacity");e.classList.remove("pointerEventsNone"),e.classList.remove("lowOpacity"),t.classList.add("active")}else{for(const e of a)e.classList.contains("lowOpacity")&&e.classList.remove("lowOpacity"),e.classList.add("normalOpacity");e.classList.remove("normalOpacity"),t.classList.remove("active"),setTimeout(()=>{for(const e of a)e.classList.remove("pointerEventsNone"),e.classList.contains("normalOpacity")&&e.classList.remove("normalOpacity")},200)}}function tt(e,t){e.classList.add("vanishTask"),Re("add"),function(e){e.deletedInfoTask=!0,localStorage.setItem("tasks",JSON.stringify(s)),setTimeout(()=>{const t=s.indexOf(e);s.splice(t,1),localStorage.setItem("tasks",JSON.stringify(s)),s.length<1&&localStorage.removeItem("tasks")},350)}(t),setTimeout(()=>{e.remove(),h(),l.classList.contains("active")?F("allTasks"):T(),setTimeout(()=>{Re("remove")},150),R(),oe(),B&&""!=S.value&&x()},350)}function st(e,t,i,n){const c=document.createElement("div"),l=document.createElement("div"),o=document.createElement("div"),d=document.createElement("button"),r=document.createElement("button"),u=document.createElement("button"),m=document.createElement("i"),L=document.createElement("button"),p=document.createElement("button"),f=document.createElement("button"),v=document.createElement("button"),g=document.createElement("p"),k=document.createElement("i"),S=document.createElement("textarea"),E=document.createElement("p");(function(e,t,s){e.classList.add("taskField"),t.classList.add("task"),s.classList.add("taskFront"),s.classList.add("hover"),e.appendChild(t),t.appendChild(s)})(e,t,i),function(e,t,s){t.innerText=s.taskContent,t.classList.add("taskContent"),e.appendChild(t)}(i,E,n),function(e,t){t.classList.add("btnField"),e.appendChild(t)}(i,c),function(e,t,i,n,c,l,o,d,r){const u=document.createElement("i");i.classList.add("taskInfo"),i.classList.add("hide"),n.classList.add("infoTextContent"),l.classList.add("completedTaskIcon"),l.classList.add("fa-solid"),l.classList.add("fa-check"),l.classList.add("hide"),t.appendChild(i),i.appendChild(n),i.appendChild(c),i.appendChild(l),c.classList.add("schedulingRemoveBtn"),c.appendChild(u),u.classList.add("fa-regular"),u.classList.add("fa-circle-xmark"),c.addEventListener("click",()=>((e,t,i,n,c,l,o)=>{t.classList.add("vanishTaskInfo"),function(e){e.deletedInfoTask=!0,a(e),localStorage.setItem("tasks",JSON.stringify(s))}(o),setTimeout(()=>{Qe(l,t,i),e.classList.add("pointerEventsNone"),t.classList.remove("vanishTaskInfo"),T(),h()},200),setTimeout(()=>{e.classList.remove("pointerEventsNone"),n.classList.remove("disabledBtn"),c.classList.remove("disabledBtn")},500)})(e,i,t,r,d,n,o))}(e,i,l,g,d,k,n,L,p),function(e,t,s,a,i,n,c,l){const o=document.createElement("div"),d=document.createElement("div"),r=document.createElement("button"),u=document.createElement("p"),m=document.createElement("i"),L=document.createElement("i");a.classList.add("notePadContainer"),a.classList.add("taskBehind"),o.classList.add("notePadTop"),u.classList.add("notePadTitle"),c.classList.add("notePadInput"),c.setAttribute("name","notePadInput"),c.setAttribute("placeholder","O que deseja anotar?"),d.classList.add("notePadBtnField"),l.classList.add("cleanNoteBtn"),l.classList.add("hide"),l.setAttribute("title","Limpar Anotações"),m.classList.add("fa-solid"),m.classList.add("fa-xmark"),r.classList.add("saveNoteBtn"),r.setAttribute("title","Salvar"),L.classList.add("fa-solid"),L.classList.add("fa-angles-right"),c.setAttribute("spellcheck","false"),s.appendChild(a),a.appendChild(o),a.appendChild(c),a.appendChild(d),o.appendChild(u),u.innerText="Anotações",o.appendChild(r),r.appendChild(L),d.appendChild(l),l.appendChild(m),r.onclick=()=>_e(e,s,t,a,c,i,n),c.onkeyup=()=>Ue(c,l),l.onclick=()=>Ye(c,l)}(e,i,t,o,f,n,S,r),function(e,t,s,a,i,n,c,l,o,d,r,u,m){a.appendChild(c),c.classList.add("checkBtn"),c.appendChild(l),l.classList.add("fa-solid"),l.classList.add("fa-thumbs-up"),c.setAttribute("title","Concluir"),c.addEventListener("click",()=>((e,t,s,a,i,n,c,l,o,d,r,u)=>{if(t.classList.contains("scheduled")){function m(){we(Be),setTimeout(()=>{Ze(e,t,s,n,c,i,a,l,o,r,d,u)},200)}De("Esta tarefa está agendada. Tem certeza de que deseja concluí-la?",m)}else Ze(e,t,s,n,c,i,a,l,o,r,d,u)})(e,t,s,i,n,c,l,o,d,r,u,m))}(e,i,E,c,p,L,u,m,l,g,k,d,n),function(e,t,s,a){const i=document.createElement("i");e.appendChild(t),t.classList.add("editBtn"),t.appendChild(i),i.classList.add("fa-solid"),i.classList.add("fa-pen"),t.setAttribute("title","Editar"),t.addEventListener("click",()=>function(e,t){Oe(Je),Pe.value=e.innerText,ze.classList.remove("hide"),Me.onclick=()=>Ve(e,t),Pe.onkeypress=s=>{"Enter"===s.key&&Ve(e,t)}}(s,a))}(c,L,E,n),function(e,t,s,a,i,n,c){const l=document.createElement("i");c.appendChild(t),t.classList.add("scheduleBtn"),t.appendChild(l),l.classList.add("fa-solid"),l.classList.add("fa-clock"),t.setAttribute("title","Definir prazo"),t.addEventListener("click",()=>function(e,t,s,a,i,n,c){const l=new Date,o=l.toLocaleDateString("fr-CA"),d=l.toLocaleString("pt-BR",{timeStyle:"short"});Oe(K),Z.value=o,Z.setAttribute("min",o),$.value=d,$.focus(),_.onclick=()=>ee(e,t,s,a,i,n,c),K.onkeypress=l=>{"Enter"===l.key&&ee(e,t,s,a,i,n,c)}}(e,t,s,a,i,n,c))}(i,p,l,g,d,n,c),function(e,t,s,a,i,n,c,l,o){const d=document.createElement("i");o.appendChild(c),c.classList.add("notesBtn"),c.appendChild(d),d.classList.add("fa-solid"),d.classList.add("fa-file-lines"),c.setAttribute("title","Anotações"),c.addEventListener("click",()=>function(e,t,s,a,i,n,c,l){Ne.classList.add("pointerEventsNone"),xe&&Se.classList.add("pointerEventsNone"),B&&I.classList.add("pointerEventsNone"),l.savedNote?(a.value=l.savedNote[1],n.classList.remove("hide")):(a.value,n.classList.add("hide")),et(e,i,"true"),s.classList.add("pointerEventsNone"),t.classList.add("flipAnimate"),setTimeout(()=>{$e=!0},200),document.onmousedown=n=>{$e&&!i.contains(n.target)&&_e(e,t,s,i,a,c,l)},a.onblur=()=>{Ke(a)}}(e,t,s,a,i,n,c,l))}(e,t,i,S,o,r,f,n,c),function(e,t,s,a,i){const n=document.createElement("i");a.appendChild(i),i.classList.add("removeBtn"),i.appendChild(n),n.classList.add("fa-solid"),n.classList.add("fa-trash"),i.setAttribute("title","Excluir tarefa"),i.addEventListener("click",()=>((e,t,s)=>{if(t.classList.contains("scheduled")||s.savedNote){function a(){we(Be),setTimeout(()=>{tt(e,s)},200)}t.classList.contains("scheduled")&&s.savedNote?De("Esta tarefa possui agendamento e anotações. Tem certeza de que deseja removê-la?",a):t.classList.contains("scheduled")?De("Esta tarefa está agendada. Tem certeza de que deseja removê-la?",a):De("Esta tarefa possui anotações. Tem certeza de que deseja removê-la?",a)}else tt(e,s)})(e,t,s))}(e,i,n,c,v),!0===n.completedTask&&(E.classList.toggle("completed"),i.classList.toggle("completed"),L.classList.toggle("disabledBtn"),p.classList.toggle("disabledBtn"),m.classList.toggle("fa-thumbs-up"),m.classList.toggle("fa-rotate"),m.classList.toggle("fa-spin"),u.setAttribute("title","Restaurar"),l.classList.add("completed"),l.classList.remove("hide"),g.innerText="Tarefa concluída",k.classList.remove("hide"),d.classList.add("hide")),!0===(n.scheduledTask&&n.scheduledTask[0])&&(l.classList.remove("hide"),l.classList.add("scheduled"),i.classList.add("scheduled"),d.setAttribute("title","Remover prazo"),p.classList.add("disabledBtn"),g.innerText=n.scheduledTask[3]),!0===(n.savedNote&&n.savedNote[0])&&(S.value=n.savedNote[1],f.classList.add("active")),!0===n.expireAlert&&(i.classList.add("expireAlert"),l.classList.add("expireAlert")),!0===(n.expiredTask&&n.expiredTask[0])&&(i.classList.add("expiredTask"),l.classList.add("expiredTask"),l.classList.remove("hide"),d.setAttribute("title","Restaurar"),L.classList.add("disabledBtn"),p.classList.add("disabledBtn"),g.innerText=n.expiredTask[3])}const at=document.querySelector("#tasksContainer"),it=document.querySelector("#newTaskInput"),nt=document.querySelector("#newTaskBtn"),ct=document.querySelector("#cleanNewTaskInputBtn");function lt(){const e=new Object,t=document.createElement("div"),s=document.createElement("div"),a=document.createElement("div");B?(y(),k(pendingTasksFilterBtn),g("pendingTask"),ot(t,s,a,e)):ot(t,s,a,e),h(),F("allTasks"),R(),oe()}function ot(e,t,a,i){!function(e){e.taskContent=it.value,s.unshift(e),localStorage.setItem("tasks",JSON.stringify(s))}(i),st(e,t,a,i),e.classList.add("appearTask"),at.insertBefore(e,at.childNodes[0]),setTimeout(()=>{e.classList.remove("appearTask")},200)}it.focus(),it.onkeyup=()=>Ue(it,ct),it.onblur=()=>Ke(it),ct.onclick=()=>Ye(it,ct),nt.addEventListener("click",()=>{Ge(it)&&(lt(),it.value="",ct.classList.add("hide"))}),it.addEventListener("keypress",e=>{"Enter"===e.key&&Ge(it)&&(lt(),it.value="",ct.classList.add("hide"))}),Te.addEventListener("click",()=>{xe?Ae():(xe=!xe,localStorage.getItem("infoAccountName")?(ue.value=localStorage.getItem("infoAccountName"),ve()):(ue.value="",ve()),Se.classList.remove("pointerEventsNone"),Se.classList.remove("hide"),Se.classList.remove("menuVanish"),Se.classList.add("menuAppear"),Ie(),Te.disabled=!1)}),document.addEventListener("mousedown",e=>{Se.contains(e.target)||Te.contains(e.target)||Ee.contains(e.target)||Be.contains(e.target)||!xe||Be.classList.contains("appearWindow")?Be.classList.contains("appearWindow")&&xe&&!Se.contains(e.target)&&!Se.classList.contains("menuBlur")&&Ae():Ae()}),P.addEventListener("change",function(t){const s=t.target.files,a=s[0];if(s.length>0&&!a.type.includes("image"))alert("Por favor selecione uma imagem válida.");else if(s.length>0){const t=new Object;V=[];const s=new FileReader;s.onload=()=>{z.src=s.result,t.img=s.result,V.push(t),localStorage.setItem("infoAccountImg",JSON.stringify(V))},s.readAsDataURL(a),H.setAttribute("title","Alterar foto"),M.classList.add("hide"),W.classList.remove("hide"),le.disabled&&e(le),P.value=""}}),W.addEventListener("click",()=>{De("Tem certeza de que deseja remover a foto de perfil?",Y),Se.classList.add("menuBlur")}),Le.addEventListener("click",()=>{ge()}),pe.addEventListener("click",()=>{ue.value="",ke(),ue.focus()}),fe.addEventListener("click",()=>{ue.value=localStorage.getItem("infoAccountName"),ke(),ue.focus()}),ue.onfocus=()=>{me.classList.add("hide"),ue.classList.add("active"),re.classList.add("active"),re.classList.add("editing"),Le.classList.remove("hide"),ke()},ue.onkeyup=()=>{ke()},ue.onblur=()=>{ue.classList.remove("active"),re.classList.remove("active"),re.classList.contains("editing")||me.classList.remove("hide"),localStorage.getItem("infoAccountName")||""!=ue.value.trim()||(re.classList.remove("editing"),me.classList.remove("hide"),Le.classList.add("hide")),Ke(ue)},ue.onkeypress=e=>{"Enter"===e.key&&(ge(),ue.blur())},S.onkeyup=()=>{Ue(S,E)?(S.value.length>=1&&(A.innerText=S.value.trim()),l.classList.contains("active")||(k(l),g("allTask")),O(),x()):B&&(w(),g("allTask"))},S.onblur=()=>{Ke(S)},E.addEventListener("click",()=>{S.focus(),y(),w(),k(l),g("allTask")}),l.classList.add("active"),l.addEventListener("click",()=>{y(),w(),k(l),g("allTask")}),o.addEventListener("click",()=>{y(),O(),k(o),g("pendingTask")}),d.addEventListener("click",()=>{y(),O(),k(d),g("scheduledTask")}),r.addEventListener("click",()=>{y(),O(),k(r),g("expiredTask")}),u.addEventListener("click",()=>{y(),O(),k(u),g("completedTask")}),C(),N.addEventListener("click",()=>{y(),w(),k(l),g("allTask")}),ie.addEventListener("change",()=>{ae.classList.contains("darkTheme")?(ce(),oe()):ne()}),D.addEventListener("click",()=>{De("Todas as tarefas serão excluídas. Deseja prosseguir?",J),Se.classList.add("menuBlur")}),le.addEventListener("click",()=>{De("Todas as configurações e tarefas serão excluídas. Deseja prosseguir?",de),Se.classList.add("menuBlur")}),localStorage.getItem("infoAccountName")&&(ue.value=localStorage.getItem("infoAccountName")),localStorage.getItem("infoAccountImg")&&(V=JSON.parse(localStorage.getItem("infoAccountImg")),z.src=V[0].img,H.setAttribute("title","Alterar foto"),U()),localStorage.getItem("theme")&&ne(),localStorage.getItem("tasks")&&function(){const e=JSON.parse(localStorage.getItem("tasks"));s.length=0,s.push(...e),R(),oe(),h(),F("allTasks"),at.innerHTML="";for(let e=0;e<s.length;e++){const t=s[e],a=document.createElement("div");st(a,document.createElement("div"),document.createElement("div"),t),at.appendChild(a)}}(),setInterval(()=>{const e=new Date,t=e.toLocaleDateString("fr-CA");for(let a=0;a<s.length;a++){const c=at.childNodes[a],l=s[a];if(l.scheduledTask||l.expiredTask){const s=c.firstChild.firstChild,a=s.childNodes[2],o=a.firstChild,d=a.childNodes[1],r=l.scheduledTask?.[1]??l.expiredTask[1],u=l.scheduledTask?.[2]??l.expiredTask[2],m=new Date(r+" "+u),L=s.childNodes[1].childNodes[1],p=(m.getTime()-e.getTime())/1e3,f=p/60,v=f/1440,g=m.getDay()-e.getDay(),k=(e.getTime()-m.getTime())/1e3/60/1440,S=e.getDay()-m.getDay();p<=0?(n(l,r,u,o),h(),T(),a.classList.remove("scheduled"),a.classList.remove("expireAlert"),a.classList.add("expiredTask"),s.classList.remove("scheduled"),s.classList.remove("expireAlert"),s.classList.add("expiredTask"),d.setAttribute("title","Restaurar"),L.classList.add("disabledBtn"),o.innerText=t===r?"Expirou hoje, "+u:k<2&&6==g||k<2&&1==S?"Expirou ontem, "+u:"Expirou "+m.toLocaleDateString("pt-BR")+", "+u):te(o,v,f,g,u,r,t),l.expiredTask||i(l,r,u,o,f,t,v,g),se(s,a,f,t,v,g,r)}}},1e3)})();